<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.15.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Composite Curing Furnice Controller: Core/Src/UserLibraries/Helper_Functions.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Composite Curing Furnice Controller
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.15.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search/",'.html');
</script>
<script type="text/javascript">
$(function() { codefold.init(); });
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(function(){initNavTree('_helper___functions_8c.html','',''); });
</script>
<div id="container">
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">Helper_Functions.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Hardware abstraction and display helper functions for the UI layer.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="_helper___functions_8h_source.html">Helper_Functions.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for Helper_Functions.c:</div>
<div class="dyncontent">
<div class="center"><img src="_helper___functions_8c__incl.png" border="0" usemap="#a_core_2_src_2_user_libraries_2_helper___functions_8c" loading="lazy" alt=""/></div>
<map name="a_core_2_src_2_user_libraries_2_helper___functions_8c" id="a_core_2_src_2_user_libraries_2_helper___functions_8c">
<area shape="rect" title="Hardware abstraction and display helper functions for the UI layer." alt="" coords="103,5,257,46"/>
<area shape="rect" href="_helper___functions_8h.html" title="Hardware&#45;abstraction helper layer for SPI&#45;driven ST7920 LCD using U8g2." alt="" coords="113,94,247,120"/>
<area shape="poly" title=" " alt="" coords="181,44,183,79,177,78,179,49"/>
<area shape="rect" title=" " alt="" coords="5,315,123,341"/>
<area shape="poly" title=" " alt="" coords="160,122,138,142,107,170,79,204,57,242,53,271,57,300,52,300,48,271,52,240,74,201,104,166,134,138,164,118"/>
<area shape="rect" title=" " alt="" coords="151,241,212,267"/>
<area shape="poly" title=" " alt="" coords="182,118,184,227,178,225,178,122"/>
<area shape="rect" title=" " alt="" coords="306,168,454,193"/>
<area shape="poly" title=" " alt="" coords="214,118,334,161,329,163,214,123"/>
<area shape="rect" href="main_8h.html" title=": Header for main.c file. This file contains the common defines of the application." alt="" coords="67,241,128,267"/>
<area shape="poly" title=" " alt="" coords="175,119,114,229,109,226,171,121"/>
<area shape="rect" href="menu_8h.html" title="UI rendering and menu&#45;state interface for the curing furnace controller." alt="" coords="217,168,282,193"/>
<area shape="poly" title=" " alt="" coords="192,117,230,156,225,157,191,123"/>
<area shape="poly" title=" " alt="" coords="94,266,78,302,74,299,90,269"/>
<area shape="poly" title=" " alt="" coords="240,192,205,232,201,228,236,195"/>
<area shape="poly" title=" " alt="" coords="222,196,138,237,136,232,226,192"/>
<area shape="rect" title=" " alt="" coords="245,315,310,341"/>
<area shape="poly" title=" " alt="" coords="254,192,275,300,270,299,250,196"/>
<area shape="rect" title=" " alt="" coords="375,241,436,267"/>
<area shape="poly" title=" " alt="" coords="276,191,368,234,362,235,275,197"/>
<area shape="rect" href="common__def_8h.html" title=" " alt="" coords="390,315,498,341"/>
<area shape="poly" title=" " alt="" coords="282,188,385,216,450,239,457,254,460,270,455,302,451,299,454,270,452,256,446,243,383,221,282,193"/>
<area shape="rect" href="types_8h.html" title="Core data structures used across the composite curing furnace controller, including settings,..." alt="" coords="286,241,351,267"/>
<area shape="poly" title=" " alt="" coords="262,191,299,230,294,230,260,196"/>
<area shape="poly" title=" " alt="" coords="314,266,294,304,290,299,310,269"/>
<area shape="poly" title=" " alt="" coords="341,265,412,307,407,307,339,270"/>
</map>
</div>
</div>
<p><a href="_helper___functions_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 id="header-func-members" class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ab7f6f9bf156a55c6aeadedc10dce9b12" id="r_ab7f6f9bf156a55c6aeadedc10dce9b12"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab7f6f9bf156a55c6aeadedc10dce9b12">u8x8_spi</a> (u8x8_t *u8x8, uint8_t msg, uint8_t arg_int, void *arg_ptr)</td></tr>
<tr class="memdesc:ab7f6f9bf156a55c6aeadedc10dce9b12"><td class="mdescLeft">&#160;</td><td class="mdescRight">Low-level SPI byte callback for the U8x8 graphics library.  <br /></td></tr>
<tr class="memitem:a458b1587219ea54dccc399370a0e9813" id="r_a458b1587219ea54dccc399370a0e9813"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a458b1587219ea54dccc399370a0e9813">u8x8_gpio_and_delay</a> (u8x8_t *u8x8, uint8_t msg, uint8_t arg_int, void *arg_ptr)</td></tr>
<tr class="memdesc:a458b1587219ea54dccc399370a0e9813"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPIO and delay callback for the U8x8 graphics library.  <br /></td></tr>
<tr class="memitem:a16325c82330e86bd14a392288c13980e" id="r_a16325c82330e86bd14a392288c13980e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a16325c82330e86bd14a392288c13980e">Display_Init</a> (u8g2_t *d)</td></tr>
<tr class="memdesc:a16325c82330e86bd14a392288c13980e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes the ST7920-based display and renders the startup logo.  <br /></td></tr>
</table>
<a name="details" id="details"></a><h2 id="header-details" class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Hardware abstraction and display helper functions for the UI layer. </p>
<p>This module provides low-level hardware bridge functions required by the U8g2 graphics library when interfacing with the STM32 microcontroller. It includes:</p>
<ul>
<li>SPI byte-transfer callback used by U8x8/U8g2 (<span class="tt"><a class="el" href="#ab7f6f9bf156a55c6aeadedc10dce9b12" title="Low-level SPI byte callback for the U8x8 graphics library.">u8x8_spi</a></span>)</li>
<li>GPIO and delay callback used by U8x8/U8g2 (<span class="tt"><a class="el" href="#a458b1587219ea54dccc399370a0e9813" title="GPIO and delay callback for the U8x8 graphics library.">u8x8_gpio_and_delay</a></span>)</li>
<li>Display initialization sequence for the ST7920-based 128x64 LCD (<span class="tt"><a class="el" href="#a16325c82330e86bd14a392288c13980e" title="Initializes the ST7920-based display and renders the startup logo.">Display_Init</a></span>)</li>
</ul>
<p>These helper functions act as glue between the U8g2 driver and the STM32 HAL, providing the necessary hardware-specific I/O functionality such as:</p><ul>
<li>SPI transmission</li>
<li>Chip-select and reset signaling</li>
<li>Millisecond delays</li>
<li>Initial display setup, splash screen, and font configuration</li>
</ul>
<p>All functions in this module are designed to be lightweight and safe to call from the main application loop during display refresh operations.</p>
<dl class="section note"><dt>Note</dt><dd>This module depends on:<ul>
<li>STM32 HAL (SPI + GPIO)</li>
<li>U8g2 / U8x8 graphics libraries</li>
<li>Global SPI and GPIO handles generated by CubeMX</li>
</ul>
</dd></dl>
<dl class="section date"><dt>Date</dt><dd>03.12.2025 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Eren Egdemir </dd></dl>

<p class="definition">Definition in file <a class="el" href="_helper___functions_8c_source.html">Helper_Functions.c</a>.</p>
</div><a name="doc-func-members" id="doc-func-members"></a><h2 id="header-doc-func-members" class="groupheader">Function Documentation</h2>
<a id="a16325c82330e86bd14a392288c13980e" name="a16325c82330e86bd14a392288c13980e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16325c82330e86bd14a392288c13980e">&#9670;&#160;</a></span>Display_Init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Display_Init </td>
          <td>(</td>
          <td class="paramtype">u8g2_t *</td>          <td class="paramname"><span class="paramname"><em>d</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes the ST7920-based display and renders the startup logo. </p>
<p>This function configures and initializes the U8g2 graphics library for an ST7920 (128×64) display using the SPI backend (<span class="tt"><a class="el" href="_helper___functions_8h.html#ab7f6f9bf156a55c6aeadedc10dce9b12" title="Low-level SPI byte callback for the U8x8 graphics library.">u8x8_spi</a></span>) and GPIO/delay backend (<span class="tt"><a class="el" href="_helper___functions_8h.html#a458b1587219ea54dccc399370a0e9813" title="GPIO and delay callback for the U8x8 graphics library.">u8x8_gpio_and_delay</a></span>). After setup, it displays a startup splash screen containing project information and a custom logo.</p>
<p>Initialization steps:</p><ol type="1">
<li>Configure U8g2 for ST7920 128×64 display in full-buffer mode.</li>
<li>Initialize the display hardware.</li>
<li>Disable power-save mode.</li>
<li>Clear display RAM and internal buffer.</li>
<li>Render startup text and logo:<ul>
<li>Title: “Composite Curing Furnace”</li>
<li>Subtitle: “Controller”</li>
<li>Developer credit</li>
<li>Custom logo via <a class="el" href="group___m_e_n_u___d_r_a_w___p_r_i_m_i_t_i_v_e_s.html#ga3f71d1f216b086948a91bf9ab4ba0c3b">menu_send_setupLogo()</a></li>
</ul>
</li>
<li>Send the rendered buffer to the display.</li>
<li>Wait 1.5 seconds before continuing.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in,out]</td><td class="paramname">d</td><td>Pointer to a U8g2 display structure. The structure is initialized and modified by this function.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function should be called once at system startup before any menu or GUI rendering.</dd>
<dd>
The rotation setting U8G2_R2 is used (180° rotation). Adjust if your LCD orientation differs.</dd>
<dd>
Requires HAL SPI and GPIO peripherals to be initialized prior to use. </dd></dl>

<p class="definition">Definition at line <a class="el" href="_helper___functions_8c_source.html#l00077">77</a> of file <a class="el" href="_helper___functions_8c_source.html">Helper_Functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   77</span>                            {</div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    u8g2_Setup_st7920_s_128x64_f(d, U8G2_R2, <a class="code hl_function" href="#ab7f6f9bf156a55c6aeadedc10dce9b12">u8x8_spi</a>, <a class="code hl_function" href="#a458b1587219ea54dccc399370a0e9813">u8x8_gpio_and_delay</a>);</div>
<div class="line"><span class="lineno">   80</span>    u8g2_InitDisplay(d);</div>
<div class="line"><span class="lineno">   81</span>    u8g2_SetPowerSave(d, 0);</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    u8g2_ClearDisplay(d);</div>
<div class="line"><span class="lineno">   84</span> </div>
<div class="line"><span class="lineno">   85</span>    u8g2_SendBuffer(d);</div>
<div class="line"><span class="lineno">   86</span> </div>
<div class="line"><span class="lineno">   87</span>    u8g2_ClearBuffer(d);</div>
<div class="line"><span class="lineno">   88</span>    u8g2_SetFont(d, u8g2_font_04b_03_tr);</div>
<div class="line"><span class="lineno">   89</span>    u8g2_DrawStr(d, 13, 5, <span class="stringliteral">&quot;Composite Curing Furnace&quot;</span>);</div>
<div class="line"><span class="lineno">   90</span>    <a class="code hl_function" href="group___m_e_n_u___d_r_a_w___p_r_i_m_i_t_i_v_e_s.html#ga3f71d1f216b086948a91bf9ab4ba0c3b">menu_send_setupLogo</a>(d, 2, 14);</div>
<div class="line"><span class="lineno">   91</span>    u8g2_DrawStr(d, 9, 62, <span class="stringliteral">&quot;Developed by Eren Egdemir&quot;</span>);</div>
<div class="line"><span class="lineno">   92</span>    u8g2_DrawStr(d, 45, 12, <span class="stringliteral">&quot;Controller&quot;</span>);</div>
<div class="line"><span class="lineno">   93</span>    u8g2_SendBuffer(d);</div>
<div class="line"><span class="lineno">   94</span>    HAL_Delay(1500);</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>}</div>
<div class="ttc" id="a_helper___functions_8c_html_a458b1587219ea54dccc399370a0e9813"><div class="ttname"><a href="#a458b1587219ea54dccc399370a0e9813">u8x8_gpio_and_delay</a></div><div class="ttdeci">uint8_t u8x8_gpio_and_delay(u8x8_t *u8x8, uint8_t msg, uint8_t arg_int, void *arg_ptr)</div><div class="ttdoc">GPIO and delay callback for the U8x8 graphics library.</div><div class="ttdef"><b>Definition</b> <a href="_helper___functions_8c_source.html#l00056">Helper_Functions.c:56</a></div></div>
<div class="ttc" id="a_helper___functions_8c_html_ab7f6f9bf156a55c6aeadedc10dce9b12"><div class="ttname"><a href="#ab7f6f9bf156a55c6aeadedc10dce9b12">u8x8_spi</a></div><div class="ttdeci">uint8_t u8x8_spi(u8x8_t *u8x8, uint8_t msg, uint8_t arg_int, void *arg_ptr)</div><div class="ttdoc">Low-level SPI byte callback for the U8x8 graphics library.</div><div class="ttdef"><b>Definition</b> <a href="_helper___functions_8c_source.html#l00036">Helper_Functions.c:36</a></div></div>
<div class="ttc" id="agroup___m_e_n_u___d_r_a_w___p_r_i_m_i_t_i_v_e_s_html_ga3f71d1f216b086948a91bf9ab4ba0c3b"><div class="ttname"><a href="group___m_e_n_u___d_r_a_w___p_r_i_m_i_t_i_v_e_s.html#ga3f71d1f216b086948a91bf9ab4ba0c3b">menu_send_setupLogo</a></div><div class="ttdeci">void menu_send_setupLogo(u8g2_t *display, uint8_t x, uint8_t y)</div><div class="ttdef"><b>Definition</b> <a href="menu_8c_source.html#l00162">menu.c:162</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_helper___functions_8c_a16325c82330e86bd14a392288c13980e_cgraph.png" border="0" usemap="#a_helper___functions_8c_a16325c82330e86bd14a392288c13980e_cgraph" loading="lazy" alt=""/></div>
<map name="a_helper___functions_8c_a16325c82330e86bd14a392288c13980e_cgraph" id="a_helper___functions_8c_a16325c82330e86bd14a392288c13980e_cgraph">
<area shape="rect" title="Initializes the ST7920&#45;based display and renders the startup logo." alt="" coords="5,55,96,80"/>
<area shape="rect" href="group___m_e_n_u___d_r_a_w___p_r_i_m_i_t_i_v_e_s.html#ga3f71d1f216b086948a91bf9ab4ba0c3b" title=" " alt="" coords="144,5,299,31"/>
<area shape="poly" title=" " alt="" coords="95,52,162,34,158,37,97,57"/>
<area shape="rect" href="_helper___functions_8c.html#a458b1587219ea54dccc399370a0e9813" title="GPIO and delay callback for the U8x8 graphics library." alt="" coords="148,55,294,80"/>
<area shape="poly" title=" " alt="" coords="96,65,135,66,130,69,97,70"/>
<area shape="rect" href="_helper___functions_8c.html#ab7f6f9bf156a55c6aeadedc10dce9b12" title="Low&#45;level SPI byte callback for the U8x8 graphics library." alt="" coords="185,104,258,130"/>
<area shape="poly" title=" " alt="" coords="96,78,172,101,167,103,96,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_helper___functions_8c_a16325c82330e86bd14a392288c13980e_icgraph.png" border="0" usemap="#a_helper___functions_8c_a16325c82330e86bd14a392288c13980e_icgraph" loading="lazy" alt=""/></div>
<map name="a_helper___functions_8c_a16325c82330e86bd14a392288c13980e_icgraph" id="a_helper___functions_8c_a16325c82330e86bd14a392288c13980e_icgraph">
<area shape="rect" title="Initializes the ST7920&#45;based display and renders the startup logo." alt="" coords="103,5,193,31"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,31"/>
<area shape="poly" title=" " alt="" coords="85,19,55,21,55,16,90,17"/>
</map>
</div>

</div>
</div>
<a id="a458b1587219ea54dccc399370a0e9813" name="a458b1587219ea54dccc399370a0e9813"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a458b1587219ea54dccc399370a0e9813">&#9670;&#160;</a></span>u8x8_gpio_and_delay()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t u8x8_gpio_and_delay </td>
          <td>(</td>
          <td class="paramtype">u8x8_t *</td>          <td class="paramname"><span class="paramname"><em>u8x8</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>arg_int</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg_ptr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPIO and delay callback for the U8x8 graphics library. </p>
<p>This function implements the GPIO and timing backend required by the U8x8 display driver. It provides millisecond delays, chip-select control, reset pin control, and optional D/C pin handling for SPI-driven displays.</p>
<p>Supported messages:</p>
<ul>
<li>U8X8_MSG_DELAY_MILLI Performs a blocking delay for <code class="param">arg_int</code> milliseconds using HAL_Delay().</li>
<li>U8X8_MSG_GPIO_CS Sets the display chip-select pin (LCD_CS_Pin) high or low depending on <code class="param">arg_int</code> (0 = low, 1 = high).</li>
<li>U8X8_MSG_GPIO_DC (Optional, currently disabled) Controls the D/C pin if required by the display. Uncomment HAL call if your display uses a data/command pin.</li>
<li>U8X8_MSG_GPIO_RESET Sets the display reset pin (RESET_Pin) according to <code class="param">arg_int</code>.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u8x8</td><td>Pointer to the U8x8 structure (unused but required). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>Message ID from U8x8 indicating the requested operation. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg_int</td><td>Integer argument (milliseconds for delay, GPIO value, etc.). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg_ptr</td><td>Optional pointer for some messages (unused here).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Always returns 1 to indicate success, as required by U8x8.</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This backend assumes:<ul>
<li>HAL GPIO pins for CS and RESET are already configured as outputs.</li>
<li>HAL_Delay() is available and SysTick is running.</li>
<li>The D/C pin is optional; uncomment if your LCD requires it. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="_helper___functions_8c_source.html#l00056">56</a> of file <a class="el" href="_helper___functions_8c_source.html">Helper_Functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   58</span>{</div>
<div class="line"><span class="lineno">   59</span>    <span class="keywordflow">switch</span> (msg) {</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">case</span> U8X8_MSG_DELAY_MILLI:</div>
<div class="line"><span class="lineno">   61</span>        HAL_Delay(arg_int);</div>
<div class="line"><span class="lineno">   62</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   63</span>    <span class="keywordflow">case</span> U8X8_MSG_GPIO_CS:</div>
<div class="line"><span class="lineno">   64</span>        HAL_GPIO_WritePin(<a class="code hl_define" href="main_8h.html#a84ea8ca93f4c07da77f97ee5109d713c">LCD_CS_GPIO_Port</a>, <a class="code hl_define" href="main_8h.html#a9e8435be304f67775f7430acda62e1c2">LCD_CS_Pin</a>, arg_int);</div>
<div class="line"><span class="lineno">   65</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   66</span>    <span class="keywordflow">case</span> U8X8_MSG_GPIO_DC:</div>
<div class="line"><span class="lineno">   67</span><span class="comment">//      HAL_GPIO_WritePin(DC_GPIO_Port, DC_Pin, arg_int);</span></div>
<div class="line"><span class="lineno">   68</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   69</span>    <span class="keywordflow">case</span> U8X8_MSG_GPIO_RESET:</div>
<div class="line"><span class="lineno">   70</span>        HAL_GPIO_WritePin(<a class="code hl_define" href="main_8h.html#a42799ea77ebfa3eb74509f6f990c7fc2">RESET_GPIO_Port</a>, <a class="code hl_define" href="main_8h.html#a6da7a6d90a0fa7614ff852f395e2b332">RESET_Pin</a>, arg_int);</div>
<div class="line"><span class="lineno">   71</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   72</span>    }</div>
<div class="line"><span class="lineno">   73</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   74</span>}</div>
<div class="ttc" id="amain_8h_html_a42799ea77ebfa3eb74509f6f990c7fc2"><div class="ttname"><a href="main_8h.html#a42799ea77ebfa3eb74509f6f990c7fc2">RESET_GPIO_Port</a></div><div class="ttdeci">#define RESET_GPIO_Port</div><div class="ttdef"><b>Definition</b> <a href="main_8h_source.html#l00092">main.h:92</a></div></div>
<div class="ttc" id="amain_8h_html_a6da7a6d90a0fa7614ff852f395e2b332"><div class="ttname"><a href="main_8h.html#a6da7a6d90a0fa7614ff852f395e2b332">RESET_Pin</a></div><div class="ttdeci">#define RESET_Pin</div><div class="ttdef"><b>Definition</b> <a href="main_8h_source.html#l00091">main.h:91</a></div></div>
<div class="ttc" id="amain_8h_html_a84ea8ca93f4c07da77f97ee5109d713c"><div class="ttname"><a href="main_8h.html#a84ea8ca93f4c07da77f97ee5109d713c">LCD_CS_GPIO_Port</a></div><div class="ttdeci">#define LCD_CS_GPIO_Port</div><div class="ttdef"><b>Definition</b> <a href="main_8h_source.html#l00077">main.h:77</a></div></div>
<div class="ttc" id="amain_8h_html_a9e8435be304f67775f7430acda62e1c2"><div class="ttname"><a href="main_8h.html#a9e8435be304f67775f7430acda62e1c2">LCD_CS_Pin</a></div><div class="ttdeci">#define LCD_CS_Pin</div><div class="ttdef"><b>Definition</b> <a href="main_8h_source.html#l00076">main.h:76</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_helper___functions_8c_a458b1587219ea54dccc399370a0e9813_icgraph.png" border="0" usemap="#a_helper___functions_8c_a458b1587219ea54dccc399370a0e9813_icgraph" loading="lazy" alt=""/></div>
<map name="a_helper___functions_8c_a458b1587219ea54dccc399370a0e9813_icgraph" id="a_helper___functions_8c_a458b1587219ea54dccc399370a0e9813_icgraph">
<area shape="rect" title="GPIO and delay callback for the U8x8 graphics library." alt="" coords="241,5,387,31"/>
<area shape="rect" href="_helper___functions_8c.html#a16325c82330e86bd14a392288c13980e" title="Initializes the ST7920&#45;based display and renders the startup logo." alt="" coords="103,5,193,31"/>
<area shape="poly" title=" " alt="" coords="223,18,193,21,193,16,228,18"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,31"/>
<area shape="poly" title=" " alt="" coords="85,19,55,21,55,16,90,17"/>
</map>
</div>

</div>
</div>
<a id="ab7f6f9bf156a55c6aeadedc10dce9b12" name="ab7f6f9bf156a55c6aeadedc10dce9b12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7f6f9bf156a55c6aeadedc10dce9b12">&#9670;&#160;</a></span>u8x8_spi()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t u8x8_spi </td>
          <td>(</td>
          <td class="paramtype">u8x8_t *</td>          <td class="paramname"><span class="paramname"><em>u8x8</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>msg</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>arg_int</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *</td>          <td class="paramname"><span class="paramname"><em>arg_ptr</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Low-level SPI byte callback for the U8x8 graphics library. </p>
<p>This function acts as the hardware interface layer between the U8x8 display driver and the STM32 HAL SPI implementation. It handles all byte-level SPI operations requested by the U8x8 library, including sending data bytes and toggling the chip-select signal.</p>
<p>Supported messages:</p>
<ul>
<li>U8X8_MSG_BYTE_SET_DC (Not used for SPI displays without a D/C pin at the byte layer)</li>
<li>U8X8_MSG_BYTE_SEND Transmits a block of bytes over SPI using HAL_SPI_Transmit().</li>
<li>U8X8_MSG_BYTE_START_TRANSFER Asserts the chip-select line before an SPI transfer.</li>
<li>U8X8_MSG_BYTE_END_TRANSFER De-asserts the chip-select line after the transfer completes.</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">u8x8</td><td>Pointer to the U8x8 device structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg</td><td>Message identifier from U8x8 (U8X8_MSG_…). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg_int</td><td>Integer argument providing message-specific value (e.g., number of bytes to transmit). </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">arg_ptr</td><td>Pointer to message-specific data (e.g., bytes to send).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>1 on success (required by U8x8 library).</dd></dl>
<dl class="section note"><dt>Note</dt><dd>This backend is designed for STM32 HAL and assumes that:<ul>
<li>SPI2 is configured and initialized.</li>
<li>LCD_CS_Pin and LCD_CS_GPIO_Port are valid chip-select signals.</li>
<li>Timing requirements are satisfied by the HAL implementation. </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="_helper___functions_8c_source.html#l00036">36</a> of file <a class="el" href="_helper___functions_8c_source.html">Helper_Functions.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   37</span>                       {</div>
<div class="line"><span class="lineno">   38</span> </div>
<div class="line"><span class="lineno">   39</span>    <span class="keywordflow">switch</span> (msg) {</div>
<div class="line"><span class="lineno">   40</span>    <span class="keywordflow">case</span> U8X8_MSG_BYTE_SET_DC:</div>
<div class="line"><span class="lineno">   41</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   42</span>    <span class="keywordflow">case</span> U8X8_MSG_BYTE_SEND:</div>
<div class="line"><span class="lineno">   43</span>        HAL_SPI_Transmit(&amp;<a class="code hl_variable" href="main_8c.html#ab9da65f935e805137e2eb4e18c5ab224">hspi2</a>, (uint8_t *)arg_ptr, arg_int, 1000);</div>
<div class="line"><span class="lineno">   44</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   45</span>    <span class="keywordflow">case</span> U8X8_MSG_BYTE_START_TRANSFER:</div>
<div class="line"><span class="lineno">   46</span>        HAL_GPIO_WritePin(<a class="code hl_define" href="main_8h.html#a84ea8ca93f4c07da77f97ee5109d713c">LCD_CS_GPIO_Port</a>, <a class="code hl_define" href="main_8h.html#a9e8435be304f67775f7430acda62e1c2">LCD_CS_Pin</a>, GPIO_PIN_SET);</div>
<div class="line"><span class="lineno">   47</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">case</span> U8X8_MSG_BYTE_END_TRANSFER:</div>
<div class="line"><span class="lineno">   49</span>        HAL_GPIO_WritePin(<a class="code hl_define" href="main_8h.html#a84ea8ca93f4c07da77f97ee5109d713c">LCD_CS_GPIO_Port</a>, <a class="code hl_define" href="main_8h.html#a9e8435be304f67775f7430acda62e1c2">LCD_CS_Pin</a>, GPIO_PIN_RESET);</div>
<div class="line"><span class="lineno">   50</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">   51</span>    }</div>
<div class="line"><span class="lineno">   52</span>    <span class="keywordflow">return</span> 1;</div>
<div class="line"><span class="lineno">   53</span>}</div>
<div class="ttc" id="amain_8c_html_ab9da65f935e805137e2eb4e18c5ab224"><div class="ttname"><a href="main_8c.html#ab9da65f935e805137e2eb4e18c5ab224">hspi2</a></div><div class="ttdeci">SPI_HandleTypeDef hspi2</div><div class="ttdef"><b>Definition</b> <a href="main_8c_source.html#l00059">main.c:59</a></div></div>
</div><!-- fragment --><div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="_helper___functions_8c_ab7f6f9bf156a55c6aeadedc10dce9b12_icgraph.png" border="0" usemap="#a_helper___functions_8c_ab7f6f9bf156a55c6aeadedc10dce9b12_icgraph" loading="lazy" alt=""/></div>
<map name="a_helper___functions_8c_ab7f6f9bf156a55c6aeadedc10dce9b12_icgraph" id="a_helper___functions_8c_ab7f6f9bf156a55c6aeadedc10dce9b12_icgraph">
<area shape="rect" title="Low&#45;level SPI byte callback for the U8x8 graphics library." alt="" coords="241,5,314,31"/>
<area shape="rect" href="_helper___functions_8c.html#a16325c82330e86bd14a392288c13980e" title="Initializes the ST7920&#45;based display and renders the startup logo." alt="" coords="103,5,193,31"/>
<area shape="poly" title=" " alt="" coords="223,18,193,21,193,16,228,18"/>
<area shape="rect" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe" title="The application entry point." alt="" coords="5,5,55,31"/>
<area shape="poly" title=" " alt="" coords="85,19,55,21,55,16,90,17"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="page-nav" class="page-nav-panel">
<div id="page-nav-resize-handle"></div>
<div id="page-nav-tree">
<div id="page-nav-contents">
</div><!-- page-nav-contents -->
</div><!-- page-nav-tree -->
</div><!-- page-nav -->
</div><!-- container -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a href="dir_c6310732a22f63c0c2fc5595561e68f1.html">Core</a></li><li class="navelem"><a href="dir_b596f468b52957496e4f78b80e029268.html">Src</a></li><li class="navelem"><a href="dir_dbb1531070ff2dbabd9073ab1009462b.html">UserLibraries</a></li><li class="navelem"><a href="_helper___functions_8c.html">Helper_Functions.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.15.0 </li>
  </ul>
</div>
</body>
</html>
